<div class="listings-container">
  <h2>{{ title }}</h2>

  <ng-container *ngIf="posts as posts; else loading">
    <div *ngIf="posts.length === 0" class="empty-message">
      ÊäïÁ®ø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ
    </div>

    <div *ngFor="let post of posts" class="post-card" [routerLink]="['/posts', post.id]">
      <div class="post-content">
        <div class="post-main">
          <div class="post-header">
            <!-- „Ç´„ÉÜ„Ç¥„É™„Éº„Éê„ÉÉ„Ç∏ -->
            <span class="post-type" *ngIf="post.type">
              {{
                post.type === 'buy-sell'
                  ? 'Buy & Sell'
                  : post.type === 'event'
                    ? 'Event'
                    : 'Article'
              }}
            </span>

            <h3 class="post-title">
              {{ post.title }}
            </h3>
          </div>

          <!-- ÂÖ±ÈÄö: Â†¥ÊâÄ -->
          <p class="post-location" *ngIf="post.location">
            üìç {{ post.location }}
          </p>

          <!-- „Ç´„ÉÜ„Ç¥„É™„Éº„Åî„Å®„ÅÆÁ∞°ÊòìÊÉÖÂ†± -->
          <div class="post-extra">
            <!-- Buy & Sell -->
            <ng-container *ngIf="post.type === 'buy-sell'">
              <span *ngIf="post.buySellIntent">
                {{ post.buySellIntent === 'buy' ? 'Ë≤∑„ÅÑ„Åü„ÅÑ' : 'Â£≤„Çä„Åü„ÅÑ' }}
              </span>

              <span *ngIf="post.price != null">
                „Éª{{ post.price }} {{ post.priceCurrency || '' }}
              </span>

              <!-- ÈÄ£Áµ°ÂÖà„ÅÆÁ∞°ÊòìË°®Á§∫ -->
              <span *ngIf="post.contactEmail || post.contactInstagram || post.contactPhone || post.contactLine" class="contact-hint">
                „ÉªÈÄ£Áµ°ÂÖà„ÅÇ„Çä
              </span>
            </ng-container>

            <!-- Event -->
            <ng-container *ngIf="post.type === 'event'">
              <span *ngIf="post.eventDate">
                ÈñãÂÇ¨Êó•: {{ post.eventDate | date: 'yyyy/MM/dd' }}
              </span>

              <span *ngIf="post.maxParticipants != null">
                „ÉªÂÆöÂì°: {{ post.maxParticipants }} Âêç
              </span>
            </ng-container>

            <!-- Article -->
            <ng-container *ngIf="post.type === 'article'">
              <span *ngIf="post.articleCategory">
                „Ç´„ÉÜ„Ç¥„É™„Éº: {{ post.articleCategory }}
              </span>
            </ng-container>
          </div>

          <!-- Êú¨ÊñáÔºà‰∏ÄË¶ß„Å™„ÅÆ„ÅßÂ∞ë„Åó„Å†„ÅëÔºâ -->
          <p class="post-body">
            {{ post.body | slice:0:100 }}<span *ngIf="post.body.length > 100">‚Ä¶</span>
          </p>

          <div class="post-meta">
            <span>ÊäïÁ®øÊó•: {{ post.createdAt | date: 'yyyy/MM/dd HH:mm' }}</span>
            <!-- „Å®„Çä„ÅÇ„Åà„Åö userId „ÅÆ„Åæ„Åæ„ÄÇ„ÅÇ„Å®„Åß„É¶„Éº„Ç∂„ÉºÂêçÂºï„Åë„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÇÇOK -->
            <span class="post-user">username: {{ post.username || '‰∏çÊòé' }}</span>
          </div>
        </div>

        <!-- 1ÊûöÁõÆ„ÅÆÁîªÂÉè„Çí„Ç¢„Ç§„Ç≥„É≥„Å®„Åó„Å¶Ë°®Á§∫ -->
        <div *ngIf="post.imageUrls && post.imageUrls.length > 0" class="post-image-icon">
          <img [src]="post.imageUrls[0]" [alt]="post.title + ' „ÅÆÁîªÂÉè'" />
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #loading>
    <p class="loading">Loading...</p>
  </ng-template>
</div>
