<div class="listings-container">
  <h2>{{ title }}</h2>

  <ng-container *ngIf="posts as posts; else loading">
    <div *ngIf="posts.length === 0" class="empty-message">
      æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
    </div>

    <div *ngFor="let post of posts" class="post-card">
      <div class="post-header">
        <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒãƒƒã‚¸ -->
        <span class="post-type" *ngIf="post.type">
          {{
            post.type === 'buy-sell'
              ? 'Buy & Sell'
              : post.type === 'event'
                ? 'Event'
                : 'Article'
          }}
        </span>

        <h3 class="post-title">
          <a [routerLink]="['/posts', post.id]">
            {{ post.title }}
          </a>
        </h3>
      </div>

      <!-- å…±é€š: å ´æ‰€ -->
      <p class="post-location" *ngIf="post.location">
        ğŸ“ {{ post.location }}
      </p>

      <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ã”ã¨ã®ç°¡æ˜“æƒ…å ± -->
      <div class="post-extra">
        <!-- Buy & Sell -->
        <ng-container *ngIf="post.type === 'buy-sell'">
          <span *ngIf="post.buySellIntent">
            {{ post.buySellIntent === 'buy' ? 'è²·ã„ãŸã„' : 'å£²ã‚ŠãŸã„' }}
          </span>

          <span *ngIf="post.price != null">
            ãƒ»{{ post.price }} {{ post.priceCurrency || '' }}
          </span>
        </ng-container>

        <!-- Event -->
        <ng-container *ngIf="post.type === 'event'">
          <span *ngIf="post.eventDate">
            é–‹å‚¬æ—¥: {{ post.eventDate | date: 'yyyy/MM/dd' }}
          </span>

          <span *ngIf="post.maxParticipants != null">
            ãƒ»å®šå“¡: {{ post.maxParticipants }} å
          </span>
        </ng-container>

        <!-- Article -->
        <ng-container *ngIf="post.type === 'article'">
          <span *ngIf="post.articleCategory">
            ã‚«ãƒ†ã‚´ãƒªãƒ¼: {{ post.articleCategory }}
          </span>
        </ng-container>
      </div>

      <!-- æœ¬æ–‡ï¼ˆä¸€è¦§ãªã®ã§å°‘ã—ã ã‘ï¼‰ -->
      <p class="post-body">
        {{ post.body | slice:0:100 }}<span *ngIf="post.body.length > 100">â€¦</span>
      </p>

      <div class="post-meta">
        <span>æŠ•ç¨¿æ—¥: {{ post.createdAt | date: 'yyyy/MM/dd HH:mm' }}</span>
        <!-- ã¨ã‚Šã‚ãˆãš userId ã®ã¾ã¾ã€‚ã‚ã¨ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åå¼•ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã‚‚OK -->
        <span class="post-user">userId: {{ post.userId }}</span>
      </div>
    </div>
  </ng-container>

  <ng-template #loading>
    <p class="loading">Loading...</p>
  </ng-template>
</div>
