<ng-container *ngIf="post; else notFound">
  <article class="post-detail">
    <h1>{{ post.title }}</h1>

    <p class="meta">
      ã‚«ãƒ†ã‚´ãƒªãƒ¼: {{ post.type || 'ä¸æ˜' }}<br />
      æŠ•ç¨¿æ—¥: {{ post.createdAt | date: 'yyyy/MM/dd HH:mm' }}
    </p>

    <!-- å…±é€š: å ´æ‰€ -->
    <p *ngIf="post.location">
      ğŸ“ å ´æ‰€: {{ post.location }}
    </p>

    <!-- å…±é€š: ç”»åƒ -->
    <div *ngIf="post.imageUrls && post.imageUrls.length > 0" class="post-images">
      <div class="image-grid">
        <div *ngFor="let imageUrl of post.imageUrls" class="image-item">
          <img [src]="imageUrl" [alt]="post.title + ' ã®ç”»åƒ'" loading="lazy" />
        </div>
      </div>
    </div>

    <!-- --------------------- -->
    <!-- Buy & Sell è¡¨ç¤ºéƒ¨åˆ† -->
    <!-- --------------------- -->
    <ng-container *ngIf="post.type === 'buy-sell'">

      <p *ngIf="post.buySellIntent">
        å–å¼•ã‚¿ã‚¤ãƒ—: 
        <strong>{{ post.buySellIntent === 'buy' ? 'è²·ã„ãŸã„' : 'å£²ã‚ŠãŸã„' }}</strong>
      </p>

      <p *ngIf="post.price != null">
        ä¾¡æ ¼: <strong>{{ post.price }}</strong> {{ post.priceCurrency }}
      </p>

      <!-- é€£çµ¡å…ˆæƒ…å ± -->
      <div *ngIf="post.contactEmail || post.contactInstagram || post.contactPhone || post.contactLine" class="contact-info">
        <h3>é€£çµ¡å…ˆ</h3>
        <ul>
          <li *ngIf="post.contactEmail">
            ğŸ“§ ãƒ¡ãƒ¼ãƒ«: <a [href]="'mailto:' + post.contactEmail">{{ post.contactEmail }}</a>
          </li>
          <li *ngIf="post.contactInstagram">
            ğŸ“· Instagram: 
            <a [href]="'https://instagram.com/' + post.contactInstagram" target="_blank" rel="noopener noreferrer">
              @{{ post.contactInstagram }}
            </a>
          </li>
          <li *ngIf="post.contactPhone">
            ğŸ“ é›»è©±: <a [href]="'tel:' + post.contactPhone">{{ post.contactPhone }}</a>
          </li>
          <li *ngIf="post.contactLine">
            ğŸ’¬ LINE: {{ post.contactLine }}
          </li>
        </ul>
      </div>

    </ng-container>

    <!-- --------------------- -->
    <!-- Event è¡¨ç¤ºéƒ¨åˆ† -->
    <!-- --------------------- -->
    <ng-container *ngIf="post.type === 'event'">

      <p *ngIf="post.eventDate">
        é–‹å‚¬æ—¥: {{ post.eventDate | date: 'yyyy/MM/dd' }}
      </p>

      <p *ngIf="post.maxParticipants != null">
        å®šå“¡: {{ post.maxParticipants }} å
      </p>

    </ng-container>

    <!-- --------------------- -->
    <!-- Article è¡¨ç¤ºéƒ¨åˆ† -->
    <!-- --------------------- -->
    <ng-container *ngIf="post.type === 'article'">
      <p *ngIf="post.articleCategory">
        ã‚«ãƒ†ã‚´ãƒªãƒ¼: {{ post.articleCategory }}
      </p>
    </ng-container>

    <hr />

    <!-- æœ¬æ–‡ -->
    <p class="body">
      {{ post.body }}
    </p>
    <p class="meta">
      æŠ•ç¨¿è€…: {{ post.username }}<br />
      æŠ•ç¨¿æ—¥: {{ post.createdAt | date: 'yyyy/MM/dd HH:mm' }}
    </p>

    <!-- æŠ•ç¨¿è€…æœ¬äººã®ã¿ç·¨é›†ãƒ»å‰Šé™¤ -->
    <div *ngIf="canEdit" class="author-actions">
      <a [routerLink]="['/posts', post.id, 'edit']" class="action-link edit-link">ç·¨é›†</a>
      <button type="button" class="action-btn delete-btn" (click)="deleteRequested.emit(post.id!)">
        å‰Šé™¤
      </button>
    </div>
  </article>

  <a routerLink="/listing" class="back-link">â† æŠ•ç¨¿ä¸€è¦§ã«æˆ»ã‚‹</a>
</ng-container>

<ng-template #notFound>
  <p class="not-found">æŠ•ç¨¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
  <a routerLink="/listing" class="back-link">â† æŠ•ç¨¿ä¸€è¦§ã«æˆ»ã‚‹</a>
</ng-template>
